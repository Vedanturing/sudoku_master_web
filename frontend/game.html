<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sudoku Master</title>
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="css/auth.css">
    <link rel="stylesheet" href="css/account.css">
    <link rel="stylesheet" href="css/navbar.css">
</head>

<body>
    <!-- Navigation Bar -->
    <div id="navbar"></div>

    <!-- Main Content -->
    <div class="container">
        <header>
            <h1>Sudoku Master</h1>
            <div class="timer-container">
                <div id="timer">
                    <span id="time">00:00</span>
                </div>
            </div>
            <div class="controls">
                <select id="difficulty">
                    <option value="easy">Easy</option>
                    <option value="medium" selected>Medium</option>
                    <option value="hard">Hard</option>
                    <option value="expert">Expert</option>
                    <option value="master">Master</option>
                </select>
                <button id="new-game">New Game</button>
                <button id="create-puzzle">Create Puzzle</button>
                <button id="start-game" style="display: none;">Start Game</button>
                <button id="hint">Hint (<span id="hints-remaining">3</span>)</button>
                <button id="check">Check Solution</button>
                <button id="complete-puzzle">Complete Puzzle</button>
                <button id="generate-doc-button" style="display: none;">Generate PDF</button>
            </div>
        </header>

        <div id="pdf-link-container" style="text-align:center; margin-bottom: 10px;"></div>

        <div class="game-container">
            <div id="sudoku-grid" class="sudoku-grid"></div>
            <div class="number-pad">
                <div class="numbers">
                    <button class="number" data-number="1">1</button>
                    <button class="number" data-number="2">2</button>
                    <button class="number" data-number="3">3</button>
                    <button class="number" data-number="4">4</button>
                    <button class="number" data-number="5">5</button>
                    <button class="number" data-number="6">6</button>
                    <button class="number" data-number="7">7</button>
                    <button class="number" data-number="8">8</button>
                    <button class="number" data-number="9">9</button>
                </div>
                <div class="actions">
                    <button id="notes-mode">Notes Mode</button>
                    <button id="erase">Erase</button>
                    <button id="undo">Undo</button>
                    <button id="redo">Redo</button>
                </div>
            </div>
        </div>
        <div id="message" class="message"></div>
    </div>

    <!-- Sidebar Overlay -->
    <div id="sidebar-overlay"></div>
    <!-- Sidebar Toggle Button -->
    <button id="sidebar-toggle">â˜°</button>
    <!-- Sidebar for Login and History only -->
    <div id="auth-sidebar">
        <button id="sidebar-close">&times;</button>
        <h2>Account</h2>
        <div id="auth-forms">
            <!-- Login Form -->
            <form id="login-form">
                <h3>Login</h3>
                <label for="login-username">Username</label>
                <input type="text" id="login-username" name="username" required>
                <label for="login-password">Password</label>
                <input type="password" id="login-password" name="password" required>
                <button type="submit">Login</button>
            </form>
            <div style="margin-top: 10px; text-align: center;">
                <span>Don't have an account? <a href="signup.html" id="signup-link">Sign up here.</a></span>
            </div>
        </div>
        <!-- Settings Section -->
        <div id="settings-section">
            <h3>Settings</h3>
            <div style="margin-bottom: 14px;">
                <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                    <input type="checkbox" id="dark-mode-toggle">
                    Dark Mode
                </label>
            </div>
        </div>
        <!-- History Section -->
        <div id="history-section">
            <h3>History</h3>
            <ul id="history-list"></ul>
        </div>
    </div>

    <!-- Add jsPDF library -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

    <!-- Game scripts -->
    <script src="js/document-generator.js"></script>
    <script src="js/sudoku.js"></script>
    <script src="js/sudoku-ui.js"></script>
    <script src="js/app.js"></script>

    <!-- Scripts -->
    <script type="module">
        import navBar from './js/components/NavBar.js';
        import authContext from './js/auth/AuthContext.js';
        import settingsContext from './js/settings/SettingsContext.js';
        
        // Initialize navbar
        document.getElementById('navbar').innerHTML = navBar.render();
        
        // Initialize settings
        settingsContext.loadFromStorage();
    </script>
</body>

</html>